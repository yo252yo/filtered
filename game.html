<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Game</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: linear-gradient(135deg, #2b2b2b, #1f1f1f);
            color: #00ffcc;
        }

        #score {
            font-size: 24px;
            margin-bottom: 20px;
            background-color: #000;
            padding: 10px;
            border: 2px solid #00ffcc;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 255, 204, 0.5);
        }

        #card {
            width: 300px;
            height: 200px;
            background-color: #333;
            border: 2px solid #00ffcc;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 255, 204, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
            color: #fff;
        }

        #buttons {
            display: flex;
            gap: 20px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            border: 2px solid #00ffcc;
            border-radius: 5px;
            cursor: pointer;
            background-color: #000;
            color: #00ffcc;
            box-shadow: 0 4px 8px rgba(0, 255, 204, 0.5);
        }

        button:hover {
            background-color: #00ffcc;
            color: #000;
        }

        button:disabled {
            background-color: #444;
            color: #777;
            cursor: not-allowed;
            border-color: #555;
            box-shadow: none;
        }

        #conclusion {
            font-size: 18px;
            margin-top: 20px;
            color: #00ffcc;
            text-align: center;
            display: none;
        }
    </style>
</head>

<body>
    <div id="score">Viewers: 10000</div>
    <div id="card">Welcome to the game!</div>
    <div id="buttons">
        <button id="skipButton">Skip -1k viewers</button>
        <button id="keepButton">Keep</button>
    </div>
    <div id="conclusion"></div>
    <button id="outcomeButton" style="display:none; margin-top:20px;">Reveal Outcome</button>

    <script>
        const cards = [
            { text: "A shop management game about the British Museum pillaging artifacts in conquered countries", conclusion: "Very well received!", impact: 5, risk: 0.2 },
            { text: "A game about implicit self-censorship on stream", conclusion: "Abstract enough to not cause commotion", impact: 3, risk: 0.5 },
            { text: "Seems to be a game about bananas", conclusion: "Oh no it's actually about the dictatorship regimes the United Fruit Company installed in South America!", impact: 7, risk: 0.8 },
            { text: "A board game adaptation of colonial land grabbing", conclusion: "Hits a nerve with many", impact: 8, risk: 0.6 },
            { text: "A documentary-style game about the Dutch East India Company", conclusion: "Critically acclaimed!", impact: 10, risk: 0.2 },
            { text: "A simulation game exploring the role of international banks in shaping global poverty", conclusion: "Draws some controversy", impact: 6, risk: 0.7 },
            { text: "A simple platformer about mining", conclusion: "It's actually a commentary on child labor in cobalt mines", impact: 7, risk: 0.5 },
            { text: "A trivia game about spices", conclusion: "Unveils the brutal history of the spice trade", impact: 4, risk: 0.3 },
            { text: "A clicker game about oil production", conclusion: "Criticized for being too on-the-nose", impact: 5, risk: 0.8 },
            { text: "A story-driven RPG about rubber plantations", conclusion: "Deeply moving", impact: 9, risk: 0.1 }
        ];

        let currentCardIndex = 0;
        let score = 10000;
        let awaitingCoinFlip = false;

        const scoreDiv = document.getElementById('score');
        const cardDiv = document.getElementById('card');
        const skipButton = document.getElementById('skipButton');
        const keepButton = document.getElementById('keepButton');
        const conclusionDiv = document.getElementById('conclusion');
        const outcomeButton = document.getElementById('outcomeButton');

        function riskText(risk) {
            if (risk < 0.3) return "low";
            if (risk < 0.6) return "medium";
            return "high";
        }

        function showConclusion(conclusion, impact, risk) {
            conclusionDiv.textContent = `${conclusion} Impact: ${impact > 7 ? "high" : impact > 4 ? "medium" : "low"}. Risk: ${riskText(risk)}.`;
            conclusionDiv.style.display = 'block';
        }

        function resolveOutcome() {
            if (!awaitingCoinFlip) {
                awaitingCoinFlip = true;
                outcomeButton.textContent = "Resolve Outcome";
                return;
            }
            awaitingCoinFlip = false;

            const currentCard = cards[currentCardIndex - 1];
            const isSuccess = Math.random() > currentCard.risk;
            const effect = isSuccess ? currentCard.impact : -currentCard.impact;
            const resultMessage = isSuccess ? "Success!" : "Failure!";
            showConclusion(`${resultMessage} You ${isSuccess ? "gained" : "lost"} ${Math.abs(effect)} viewers.`, currentCard.impact, currentCard.risk);
            updateScore(effect);
            outcomeButton.style.display = 'none';
            updateCard();
        }

        function updateScore(change) {
            score += change;
            scoreDiv.textContent = `Viewers: ${score}`;
        }

        function updateCard() {
            conclusionDiv.style.display = 'none';
            outcomeButton.style.display = 'none';
            if (currentCardIndex < cards.length) {
                cardDiv.textContent = cards[currentCardIndex].text;
                skipButton.disabled = false;
                keepButton.disabled = false;
                outcomeButton.textContent = "Reveal Outcome";
            } else {
                cardDiv.textContent = "Game Over!";
                skipButton.disabled = true;
                keepButton.disabled = true;
            }
        }

        skipButton.addEventListener('click', () => {
            updateScore(-1000);
            currentCardIndex++;
            updateCard();
        });

        keepButton.addEventListener('click', () => {
            if (currentCardIndex < cards.length) {
                const currentCard = cards[currentCardIndex];
                showConclusion(currentCard.conclusion, currentCard.impact, currentCard.risk);
                outcomeButton.style.display = 'block';
                skipButton.disabled = true;
                keepButton.disabled = true;
            }
            currentCardIndex++;
        });

        outcomeButton.addEventListener('click', resolveOutcome);

        // Initialize the game
        updateScore(0);
        updateCard();
    </script>
</body>

</html>